(function ($) {

    $.fn.backTop = function (options) {

        var backBtn = this;
        
        var rtl_status = false;
        if ($('html').is('[dir]')) {
            rtl_status = true;
        }

        var settings = $.extend({
            'rtl': rtl_status,
            'position': 400,
            'speed': 500,
            'color': 'white',
            'theme': '' // red, green, white, custom
        }, options);

        //Settings

        var rtl = settings['rtl'];
        var position = settings['position'];
        var speed = settings['speed'];
        var color = settings['color'];
        var theme = settings['theme'];

        if (theme == 'white') {
            backBtn.addClass('white');
        } else if (theme == 'red') {
            backBtn.addClass('red');
        } else if (theme == 'green') {
            backBtn.addClass('green');
        } else if (theme == 'custom') {
            backBtn.addClass('custom');
        } else {
            backBtn.addClass('black');
        }

        if (rtl) {

            backBtn.css({
                'left': 16,
                'bottom': 16,
                'position': 'fixed'
            });

        } else {

            backBtn.css({
                'right': 16,
                'bottom': 16,
                'position': 'fixed'
            });

        }

        $(document).scroll(function () {
            var pos = $(window).scrollTop();

            if (pos >= position) {
                backBtn.fadeIn(speed);
            } else {
                backBtn.fadeOut(speed);
            }
        });

        backBtn.click(function () {
            $("html, body").animate({
                scrollTop: 0
            },
                    {
                        duration: 1200
                    });
        });

    }

}(jQuery));